CREATE KEYSPACE if not exists pia_hoteles
WITH replication = {
	'class' : 'SimpleStrategy',
	'replication_factor' : 1
};

CREATE TABLE pia_hoteles.usuario (
id_user uuid,
name text,
p_lastname text,
m_lastname text,
birthdate date,
email text,
payroll_number text,
address text,
phone_home text,
phone_personal text,
password text,
status boolean,
register_date date,
date_register date,
time_register text,
rol int,
PRIMARY KEY (email)
);

drop table usuario;

CREATE TABLE pia_hoteles.contrasenias (
id_user uuid,
last_pass text,
last_last_pass text,
PRIMARY KEY (id_user)
);


CREATE TABLE pia_hoteles.hotel (
name text,
country text,
city text,
state text,
floors_number text,
rooms_number text,
turistic_zone text,
services_add text,
beach text,
pool_number text,
events_room text,
operations_date text,
status boolean,
date_register date,
hour_register text,
user_register text,
PRIMARY KEY ((name), city)
);


CREATE TABLE pia_hoteles.habitacion (
hotel text,
type text,
beds_number text,
beds_type text,
price text,
people_number text,
room_level text,
frontof text,
details text,
amenities text,
status boolean,
date_register date,
hour_register text,
user_register text,
PRIMARY KEY ((type), hotel)
);


CREATE TABLE pia_hoteles.cliente (
name text,
p_lastname text,
m_lastname text,
birthdate date,
email text,
address text,
phone_home text,
phone_personal text,
rfc text,
payroll_number text,
marital_status text,
references text,
status text,
register_date date,
register_hour text,
last_updater text,
PRIMARY KEY ((email), name, rfc)
);


CREATE TABLE pia_hoteles.reserva(
id_reserva text,
client_name text,
p_lastname text,
m_lastname text,
hotel text,
city text,
init_date date,
end_date date,
check_in boolean,
check_out boolean,
payment_method_a text,
advance_payment text,
date_register date,
hour_register text,
user_register text,
email_client text,
date_checkin date,
date_checkout date,
status_reserva boolean,
PRIMARY KEY (id_reserva)
);

CREATE TABLE pia_hoteles.reserva_detalle(
room2 text,
people_number2 text,
price2 text,
id_reserva2 text,
PRIMARY KEY ((room2), id_reserva2)
);



CREATE TABLE pia_hoteles.reportehotel(
idreporte text,
city text,
country text,
name_hotel text,
date_ date,
rooms_number int,
ocupattion int,
people_lodging int,
PRIMARY KEY ((idreporte),name_hotel, city, country, date_)
);

CREATE TABLE pia_hoteles.reportehotel2(
idreporte2 text,
city2 text,
country2 text,
name_hotel2 text,
date_2 date,
ocupattion2 int,
PRIMARY KEY ((idreporte2),name_hotel2, city2, country2, date_2)
);

CREATE TABLE pia_hoteles.reporteventas(
id_venta text,
name text,
city text,
country text,
date_ date,
lodging float,
services float,
total float,
PRIMARY KEY ((id_venta), name, city, country, date_)
);


CREATE TABLE pia_hoteles.historialcliente(
id_historial text,
name_customer text,
lastp_customer text,
lastm_customer text,
email_customer text,
city text,
hotel text,
type_room text,
people_number text,
code_reservation text,
date_reservation date,
date_checkin date,
date_checkout date,
status_reservation boolean,
advance_pay float,
lodging float,
services float,
total float,
PRIMARY KEY ((id_historial),date_reservation, email_customer)
);



CREATE TABLE pia_hoteles.activarusuario (
id_user uuid,
name text,
p_lastname text,
m_lastname text,
email text,
status text,
PRIMARY KEY (status, id_user)
);


CREATE TABLE pia_hoteles.cancelaciones (
id_cancellations text,
codigo_reservation text,
date_cancellation date,
hour_cancellation text,
user_cancellation text,
PRIMARY KEY (id_cancellations)
);

CREATE TABLE pia_hoteles.contadorcancel (
nombre text,
cont counter,
PRIMARY KEY (nombre)
);


CREATE TABLE pia_hoteles.buscarcliente (
id_user uuid,
name text,
p_lastname text,
m_lastname text,
email text,
rfc text,
PRIMARY KEY (p_lastname, m_lastname)
);


CREATE TABLE pia_hoteles.buscarcliente2 (
id_user uuid,
name text,
p_lastname text,
m_lastname text,
email text,
rfc text,
PRIMARY KEY (email, p_lastname)
);


CREATE TABLE pia_hoteles.buscarcliente3 (
id_user uuid,
name text,
p_lastname text,
m_lastname text,
email text,
rfc text,
PRIMARY KEY (rfc, p_lastname)
);


CREATE TABLE pia_hoteles.buscarciudad (
city text,
PRIMARY KEY (city)
);


CREATE TABLE pia_hoteles.habitacionTemporal (
hotel text,
type text,
beds_number text,
beds_type text,
price text,
people_number text,
room_level text,
frontof text,
details text,
amenities text,
status boolean,
cant_pers_soli text,
date_in date,
date_out date,
PRIMARY KEY (type)
);

CREATE TABLE pia_hoteles.servicios_adicionales(
	service text,
	price_service text,
	PRIMARY KEY (service)
);

CREATE TABLE pia_hoteles.servicios_temporales(
	service text,
	price_service text,
	PRIMARY KEY (service)
);


insert into servicios_adicionales(service, price_service) values ('Gimnasio','200');
insert into servicios_adicionales(service, price_service) values ('Gimnasio','50');
insert into servicios_adicionales(service, price_service) values ('Servicio a cuarto','100');


select * from usuario;
truncate usuario;
select * from cliente;
select * from hotel;
select * from habitacion;
select * from buscarciudad;
select * from habitacionTemporal;
select * from reserva;
select * from reserva_detalle;
select * from servicios_adicionales;
select * from servicios_temporales;

select * from cancelaciones;
select * from contadorcancel;
truncate cancelaciones;
truncate contadorcancel;
truncate reserva;
truncate reserva_detalle;

truncate servicios_temporales;

insert into usuario(name, password, email) values ('Edson','123','hola@gmail.com');
insert into usuario(name, password, email) values ('Kevin','puto el que lo ponga','Pepeeltroncatoro@gmail.com');


insert into usuario(name, password, email, p_lastname, m_lastname, birthdate,payroll_number, address, phone_home, phone_personal, status, date_register, time_register, rol) values ('Empleado2' ,'123', 'c', 'Empleado2', 'Empleado2', '2023-05-09', '1234', '4123', '4123', '321', true, '2023-05-09', '123213', 1) if not exists;