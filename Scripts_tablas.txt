CREATE KEYSPACE if not exists pia_hoteles
WITH replication = {
	'class' : 'SimpleStrategy',
	'replication_factor' : 1
};

CREATE TABLE pia_hoteles.usuario (
id_user uuid,
name text,
p_lastname text,
m_lastname text,
birthdate date,
email text,
payroll_number text,
address text,
phone_home text,
phone_personal text,
password text,
status boolean,
register_date date,
date_register date,
time_register text,
PRIMARY KEY (email)
);

CREATE TABLE pia_hoteles.contrasenias (
id_user uuid,
last_pass text,
last_last_pass text,
PRIMARY KEY (id_user)
);


CREATE TABLE pia_hoteles.hotel (
name text,
country text,
city text,
state text,
floors_number text,
rooms_number text,
turistic_zone text,
services_add text,
beach text,
pool_number text,
events_room text,
operations_date text,
status boolean,
date_register date,
hour_register text,
user_register text,
PRIMARY KEY ((name), city)
);


CREATE TABLE pia_hoteles.habitacion (
hotel text,
type text,
beds_number text,
beds_type text,
price text,
people_number text,
room_level text,
frontof text,
details text,
amenities text,
status boolean,
date_register date,
hour_register text,
user_register text,
PRIMARY KEY ((type), hotel)
);


CREATE TABLE pia_hoteles.cliente (
name text,
p_lastname text,
m_lastname text,
birthdate date,
email text,
address text,
phone_home text,
phone_personal text,
rfc text,
payroll_number text,
marital_status text,
references text,
status text,
register_date date,
register_hour text,
last_updater text,
PRIMARY KEY ((email), name, rfc)
);


CREATE TABLE pia_hoteles.reserva(
id_reserva text,
client_name text,
p_lastname text,
m_lastname text,
hotel text,
city text,
init_date date,
end_date date,
check_in boolean,
check_out boolean,
payment_method_a text,
advance_payment text,
date_register date,
hour_register text,
user_register text,
PRIMARY KEY (id_reserva)
);

CREATE TABLE pia_hoteles.reserva_detalle(
room2 text,
people_number2 text,
price2 text,
id_reserva2 text,
init_date2 date,
end_date2 date,
PRIMARY KEY ((room2), id_reserva2)
);


CREATE TABLE pia_hoteles.reportehotel(
name text,
city text,
country text,
rooms_number int,
date_ date,
type_room text,
ocupattion float,
guests text,
PRIMARY KEY ((name), city, country, date_)
);


CREATE TABLE pia_hoteles.reporteventas(
name text,
city text,
country text,
date_ date,
lodging float,
services float,
total float,
PRIMARY KEY ((name), city, country, date_)
);


CREATE TABLE pia_hoteles.historialcliente(
id_customer uuid,
name_customer text,
lastp_customer text,
lastm_customer text,
city text,
hotel text,
type_room text,
people_number int,
code_reservation int,
date_reservation date,
date_checkin date,
date_checkout date,
status_reservation text,
advance float,
lodging float,
services float,
total float,
PRIMARY KEY (date_reservation, lastp_customer)
);


CREATE TABLE pia_hoteles.activarusuario (
id_user uuid,
name text,
p_lastname text,
m_lastname text,
email text,
status text,
PRIMARY KEY (status, id_user)
);


CREATE TABLE pia_hoteles.cancelaciones (
id_cancellations text,
codigo_reservation text,
date_cancellation date,
hour_cancellation text,
user_cancellation text,
PRIMARY KEY (id_cancellations)
);

CREATE TABLE pia_hoteles.contadorcancel (
nombre text,
cont counter,
PRIMARY KEY (nombre)
);


CREATE TABLE pia_hoteles.buscarcliente (
id_user uuid,
name text,
p_lastname text,
m_lastname text,
email text,
rfc text,
PRIMARY KEY (p_lastname, m_lastname)
);


CREATE TABLE pia_hoteles.buscarcliente2 (
id_user uuid,
name text,
p_lastname text,
m_lastname text,
email text,
rfc text,
PRIMARY KEY (email, p_lastname)
);


CREATE TABLE pia_hoteles.buscarcliente3 (
id_user uuid,
name text,
p_lastname text,
m_lastname text,
email text,
rfc text,
PRIMARY KEY (rfc, p_lastname)
);


CREATE TABLE pia_hoteles.buscarciudad (
city text,
PRIMARY KEY (city)
);


CREATE TABLE pia_hoteles.habitacionTemporal (
hotel text,
type text,
beds_number text,
beds_type text,
price text,
people_number text,
room_level text,
frontof text,
details text,
amenities text,
status boolean,
cant_pers_soli text,
date_in date,
date_out date,
PRIMARY KEY (type)
);

CREATE TABLE pia_hoteles.servicios_adicionales(
	service text,
	price_service text,
	PRIMARY KEY (service)
);

CREATE TABLE pia_hoteles.servicios_temporales(
	service text,
	price_service text,
	PRIMARY KEY (service)
);

insert into servicios_adicionales(service, price_service) values ('Gimnasio','200');
insert into servicios_adicionales(service, price_service) values ('Gimnasio','50');
insert into servicios_adicionales(service, price_service) values ('Servicio a cuarto','100');


select * from usuario;
select * from cliente;
select * from hotel;
select * from habitacion;
select * from buscarciudad;
select * from habitacionTemporal;
select * from reserva;
select * from reserva_detalle;
select * from servicios_adicionales;
select * from servicios_temporales;

select * from cancelaciones;
select * from contadorcancel;
truncate cancelaciones;
truncate contadorcancel;
truncate reserva;
truncate reserva_detalle;

truncate servicios_temporales;

insert into usuario(name, password, email) values ('Edson','123','hola@gmail.com');
insert into usuario(name, password, email) values ('Kevin','puto el que lo ponga','Pepeeltroncatoro@gmail.com');
insert into usuario(name, password, p_lastname, m_lastname, birthdate, email, payroll_number, address, phone_home, phone_personal,status,register_date) values ('Isaac','123','Espinoza','Morales','2003-10-16','a','16000','Col.Puerta del Norte','811092121', '8184714186' , true, '2020-05-16');

INSERT INTO hotel (name,beach,city,country,date_register,events_room,floors_number,hour_register,id_hotel,operations_date,pool_number,register_date,rooms_number,services_add,state,status,turistic_zone,user_register) VALUES ('Edshotel',true,'ciupapa','de las maravillas',null,true,'2',null,null,'2023-05-09','2',null,'2','WiFi Renta de DVD Masajes Restaurantes','pasivo',null,'Activo',null);